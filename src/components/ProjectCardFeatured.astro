---
import { Image } from 'astro:assets';
import type { ProjectCard } from '@src/lib/project-cards';
import type { ImageMetadata } from 'astro';

interface Props {
  project: ProjectCard;
  image: ImageMetadata;
  index?: number;
}

const { project, image, index = 0 } = Astro.props;
const formatIndex = (i: number) => String(i + 1).padStart(2, '0');
---

<article class="tech-card group h-full flex flex-col">
  <!-- Image section with label -->
  <div class="relative shrink-0">
    <!-- Featured label -->
    <div class="absolute top-0 left-0 z-10 bg-black text-white dark:bg-white dark:text-black px-4 py-2">
      <span class="font-mono text-xs uppercase tracking-wider">
        Featured_Project_{formatIndex(index)}
      </span>
    </div>

    <!-- Project image -->
    <div class="aspect-[16/9] overflow-hidden bg-zinc-900">
      <Image
        src={image}
        alt={project.name}
        class="h-full w-full object-cover opacity-90 transition-all duration-500 group-hover:opacity-100 group-hover:scale-105"
        loading="lazy"
      />
    </div>
  </div>

  <!-- Content section -->
  <div class="p-6 md:p-8 space-y-6 flex-1 flex flex-col">
    <!-- Tech tags -->
    {project.tags.length > 0 && (
      <div class="flex flex-wrap gap-2">
        {project.tags.slice(0, 4).map((tag) => (
          <span class="inline-block bg-black text-white dark:bg-white dark:text-black px-3 py-1.5 font-mono text-xs uppercase tracking-wider">
            {tag}
          </span>
        ))}
      </div>
    )}

    <!-- Title and description -->
    <div class="space-y-4 flex-1">
      <!-- Project title - large italic bold -->
      <h3 class="hero-title text-4xl md:text-5xl lg:text-6xl text-black dark:text-white">
        {project.name}
      </h3>

      <!-- Description in monospace -->
      <p class="font-mono text-sm md:text-base leading-relaxed text-zinc-600 dark:text-zinc-300">
        {project.description}
      </p>
    </div>

    <!-- Action button -->
    <div class="mt-auto pt-4">
      {project.demoLink ? (
        <a
          href={project.demoLink}
          target="_blank"
          rel="noopener noreferrer"
          class="btn-primary inline-flex"
        >
          Live Demo
          <span class="text-lg">↗</span>
        </a>
      ) : (
        <a
          href={`/projects/${project.slug}/`}
          class="btn-primary inline-flex"
        >
          View Project
          <span class="text-lg">↗</span>
        </a>
      )}
    </div>
  </div>
</article>
