---
import { Image } from 'astro:assets';
import type { ProjectCard } from '@src/lib/project-cards';
import type { ImageMetadata } from 'astro';

interface Props {
  project: ProjectCard;
  image: ImageMetadata;
  index?: number;
}

const { project, image, index = 0 } = Astro.props;
const formatIndex = (i: number) => String(i + 1).padStart(2, '0');
---

<a href={`/projects/${project.slug}/`} class="tech-card group block h-full">
  <!-- Project image -->
  <div class="relative aspect-[4/3] overflow-hidden bg-zinc-900">
    <!-- Featured label -->
    <div class="absolute top-0 left-0 z-10 bg-black text-white dark:bg-white dark:text-black px-3 py-1.5">
      <span class="font-mono text-[10px] uppercase tracking-wider">
        Featured_Project_{formatIndex(index)}
      </span>
    </div>
    <Image
      src={image}
      alt={project.name}
      class="h-full w-full object-cover grayscale opacity-80 transition-all duration-500 group-hover:grayscale-0 group-hover:opacity-100"
      loading="lazy"
    />
  </div>

  <!-- Content -->
  <div class="p-5 flex items-start justify-between gap-4">
    <div class="space-y-2">
      <h3 class="font-bold text-lg uppercase tracking-tight text-black dark:text-white">
        {project.name}
      </h3>
      <p class="font-mono text-xs leading-relaxed text-zinc-500 dark:text-zinc-300">
        {project.description}
      </p>
    </div>
    <!-- Arrow -->
    <span class="text-lg shrink-0 transition-transform duration-200 group-hover:translate-x-1 mt-1">â†’</span>
  </div>
</a>
