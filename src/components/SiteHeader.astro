---
import CTAButton from "./CTAButton.astro";
const { url } = Astro;
---

<header
    class="fixed top-0 left-0 right-0 z-[1000] bg-white/95 backdrop-blur-lg border-b border-gray-200 transition-all duration-200"
>
    <div
        class="max-w-container mx-auto px-6 py-4 md:py-5 flex items-center justify-between"
    >
        <a
            href="/"
            class="flex items-center gap-3 no-underline text-gray-900 font-medium text-base md:text-[1.1rem] z-[1001] transition-opacity duration-200 hover:opacity-80"
        >
            <img
                src="/img/avatar.png"
                alt="Hanif smiling"
                class="w-12 h-12 object-cover"
            />
            <span
                class="font-medium text-gray-900 tracking-normal leading-tight"
                >Hanif Carroll</span
            >
        </a>
        <nav
            class="hidden desktop-nav"
            id="main-nav"
            aria-label="Main Navigation"
        >
            <ul
                class="list-none m-0 p-0 flex items-center gap-6 lg:gap-8 xl:gap-10"
            >
                <li class="flex">
                    <a
                        href="/"
                        class={`text-[0.95rem] md:text-base font-normal text-gray-500 no-underline py-2 relative transition-colors duration-200 tracking-normal hover:text-gray-800 ${
                            url.pathname === "/"
                                ? "text-gray-800 font-medium after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-full after:h-px after:bg-accent-500"
                                : ""
                        }`}
                    >
                        Home
                    </a>
                </li>
                <li class="flex">
                    <a
                        href="/about"
                        class={`text-[0.95rem] md:text-base font-normal text-gray-500 no-underline py-2 relative transition-colors duration-200 tracking-normal hover:text-gray-800 ${
                            url.pathname.startsWith("/about")
                                ? "text-gray-800 font-medium after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-full after:h-px after:bg-accent-500"
                                : ""
                        }`}
                    >
                        About
                    </a>
                </li>
                <li class="flex">
                    <a
                        href="/services"
                        class={`text-[0.95rem] md:text-base font-normal text-gray-500 no-underline py-2 relative transition-colors duration-200 tracking-normal hover:text-gray-800 ${
                            url.pathname.startsWith("/services")
                                ? "text-gray-800 font-medium after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-full after:h-px after:bg-accent-500"
                                : ""
                        }`}
                    >
                        Services
                    </a>
                </li>
                <li class="flex">
                    <a
                        href="/projects"
                        class={`text-[0.95rem] md:text-base font-normal text-gray-500 no-underline py-2 relative transition-colors duration-200 tracking-normal hover:text-gray-800 ${
                            url.pathname.startsWith("/projects")
                                ? "text-gray-800 font-medium after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-full after:h-px after:bg-accent-500"
                                : ""
                        }`}
                    >
                        Projects
                    </a>
                </li>
                <!-- Writing link hidden for now -->
                <!--
                <li class="flex">
                    <a
                        href="/writing"
                        class={`text-[0.95rem] md:text-base font-normal text-gray-500 no-underline py-2 relative transition-colors duration-200 tracking-normal hover:text-gray-800 ${
                            url.pathname.startsWith("/writing")
                                ? "text-gray-800 font-medium after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-full after:h-px after:bg-accent-500"
                                : ""
                        }`}
                    >
                        Writing
                    </a>
                </li>
                -->
                <li class="flex ml-4">
                    <CTAButton
                        href="/contact?utm_source=nav#book"
                        text="Let's Talk"
                        size="small"
                        external={false}
                    />
                </li>
            </ul>
        </nav>
        <button
            class="mobile-nav-button bg-transparent border-0 p-2 cursor-pointer z-[1001]"
            id="mobile-nav-toggle"
            aria-label="Toggle Navigation"
            aria-expanded="false"
            aria-controls="main-nav"
        >
            <span class="sr-only">Menu</span>
            <span class="flex flex-col w-5 h-4 justify-between">
                <span
                    class="w-full h-0.5 bg-gray-800 transition-all duration-200 rounded-sm hamburger-line"
                ></span>
                <span
                    class="w-full h-0.5 bg-gray-800 transition-all duration-200 rounded-sm hamburger-line"
                ></span>
                <span
                    class="w-full h-0.5 bg-gray-800 transition-all duration-200 rounded-sm hamburger-line"
                ></span>
            </span>
        </button>
    </div>

    <!-- Mobile Navigation -->
    <nav
        class="mobile-nav hidden absolute top-full left-0 right-0 bg-white/[0.98] backdrop-blur-lg border-b border-gray-200 px-6 py-6 z-[1000]"
        id="mobile-nav"
    >
        <ul class="list-none m-0 p-0 flex flex-col gap-5 items-center">
            <li class="flex w-full justify-center">
                <a
                    href="/"
                    class={`text-base font-normal text-gray-500 no-underline py-2 relative transition-colors duration-200 tracking-normal hover:text-gray-800 ${
                        url.pathname === "/" ? "text-gray-800 font-medium" : ""
                    }`}
                >
                    Home
                </a>
            </li>
            <li class="flex w-full justify-center">
                <a
                    href="/about"
                    class={`text-base font-normal text-gray-500 no-underline py-2 relative transition-colors duration-200 tracking-normal hover:text-gray-800 ${
                        url.pathname.startsWith("/about")
                            ? "text-gray-800 font-medium"
                            : ""
                    }`}
                >
                    About
                </a>
            </li>
            <li class="flex w-full justify-center">
                <a
                    href="/services"
                    class={`text-base font-normal text-gray-500 no-underline py-2 relative transition-colors duration-200 tracking-normal hover:text-gray-800 ${
                        url.pathname.startsWith("/services")
                            ? "text-gray-800 font-medium"
                            : ""
                    }`}
                >
                    Services
                </a>
            </li>
            <li class="flex w-full justify-center">
                <a
                    href="/projects"
                    class={`text-base font-normal text-gray-500 no-underline py-2 relative transition-colors duration-200 tracking-normal hover:text-gray-800 ${
                        url.pathname.startsWith("/projects")
                            ? "text-gray-800 font-medium"
                            : ""
                    }`}
                >
                    Projects
                </a>
            </li>
            <!-- Writing link hidden for now -->
            <!--
            <li class="flex w-full justify-center">
                <a
                    href="/writing"
                    class={`text-base font-normal text-gray-500 no-underline py-2 relative transition-colors duration-200 tracking-normal hover:text-gray-800 ${
                        url.pathname.startsWith("/writing")
                            ? "text-gray-800 font-medium"
                            : ""
                    }`}
                >
                    Writing
                </a>
            </li>
            -->
            <li class="flex w-full justify-center mt-2">
                <CTAButton
                    href="/contact?utm_source=nav#book"
                    text="Let's Talk"
                    size="small"
                    external={false}
                />
            </li>
        </ul>
    </nav>
</header>

<style>
    /* Custom responsive breakpoint at 1024px */
    @media (min-width: 1024px) {
        .desktop-nav {
            display: block !important;
        }
        .mobile-nav-button {
            display: none !important;
        }
        .mobile-nav {
            display: none !important;
        }
    }

    @media (max-width: 1023px) {
        .desktop-nav {
            display: none !important;
        }
        .mobile-nav-button {
            display: block !important;
        }
    }

    /* Hamburger animation styles */
    .mobile-toggle[aria-expanded="true"] .hamburger-line:nth-child(1) {
        transform: translateY(7px) rotate(45deg);
    }

    .mobile-toggle[aria-expanded="true"] .hamburger-line:nth-child(2) {
        opacity: 0;
    }

    .mobile-toggle[aria-expanded="true"] .hamburger-line:nth-child(3) {
        transform: translateY(-7px) rotate(-45deg);
    }

    .mobile-nav.is-open {
        display: block !important;
    }
</style>

<script>
    const toggleButton = document.getElementById("mobile-nav-toggle");
    const mobileNav = document.getElementById("mobile-nav");

    if (toggleButton && mobileNav) {
        toggleButton.addEventListener("click", () => {
            const isOpen = mobileNav.classList.toggle("is-open");
            toggleButton.setAttribute("aria-expanded", isOpen.toString());
        });
    }
</script>
