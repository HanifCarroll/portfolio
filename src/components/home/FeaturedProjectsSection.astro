---
import { getCollection, type CollectionEntry } from "astro:content";
import FeaturedProjectCard from "./FeaturedProjectCard.astro";

const featuredProjects = (await getCollection("projects"))
    .filter((project: CollectionEntry<"projects">) => project.data.isFeatured)
    .sort(
        (a: CollectionEntry<"projects">, b: CollectionEntry<"projects">) =>
            (a.data.order ?? 0) - (b.data.order ?? 0)
    );
---

<section id="featured-projects" class="bg-gray-50 text-gray-800">
    <div class="container max-w-container mx-auto py-20 px-6 md:py-[100px] lg:py-[120px]">
        <h2 class="text-5xl font-light tracking-tight text-center mb-[60px] text-gray-900 leading-tight md:text-[2.75rem] md:mb-20">
            Featured Projects
        </h2>

        <div class="flex flex-col gap-[60px] md:gap-20 lg:gap-[100px]">
            {
                featuredProjects.map((project: any) => {
                    return (
                        <FeaturedProjectCard
                            title={project.data.title}
                            description={project.data.description}
                            tags={project.data.tags}
                            image={project.data.image}
                            imageAlt={
                                project.data.imageAlt ?? project.data.title
                            }
                            slug={project.slug}
                        />
                    );
                })
            }
        </div>
    </div>
</section>

