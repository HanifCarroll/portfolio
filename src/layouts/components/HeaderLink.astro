---
import type { HTMLAttributes } from 'astro/types';

type Props = HTMLAttributes<'a'>;

const { href, class: className, ...props } = Astro.props;

const { pathname } = Astro.url;
const subpath = pathname.match(/[^\/]+/g);
const isActive = href === pathname || href === '/' + subpath?.[0];
---

<a
	href={href}
	class:list={[
		'relative inline-flex items-center text-sm font-medium text-zinc-500 transition-colors after:absolute after:-bottom-1 after:left-0 after:h-[2px] after:w-full after:origin-left after:rounded-full after:bg-zinc-900 after:transition-transform after:duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-zinc-500 dark:text-zinc-400 dark:after:bg-zinc-100 dark:focus-visible:outline-zinc-300',
		{ 'text-zinc-900 after:scale-x-100 after:opacity-100 dark:text-zinc-50': isActive },
		{ 'after:scale-x-0 after:opacity-0 hover:text-zinc-900 hover:after:scale-x-100 hover:after:opacity-100 dark:hover:text-zinc-50': !isActive },
		className
	]}
	{...props}
>
	<slot />
</a>
