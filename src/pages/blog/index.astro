---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import BlogCard from "../../components/BlogCard.astro";

const blogPosts = await getCollection("blog");
const sortedPosts = blogPosts.sort((a, b) => 
    new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime()
);
---

<BaseLayout title="Blog" description="Thoughts on product development, design, and building things people want to use.">
    <section class="container section-padding-block">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-16">
                <h1 class="text-4xl sm:text-5xl font-light tracking-tight text-gray-900 mb-6 leading-tight">Blog</h1>
                <p class="text-xl font-light leading-relaxed text-gray-600 max-w-3xl mx-auto">
                    Thoughts on product development, design, and building things people want to use.
                </p>
            </div>
            
            {sortedPosts.length === 0 ? (
                <div class="text-center py-16">
                    <p class="text-lg text-gray-500">No blog posts yet. Check back soon!</p>
                </div>
            ) : (
                <div class="space-y-8">
                    {sortedPosts.map((post) => (
                        <BlogCard
                            title={post.data.title}
                            description={post.data.description}
                            publishDate={post.data.publishDate}
                            category={post.data.category}
                            tags={post.data.tags}
                            slug={post.slug}
                            coverImage={post.data.coverImage}
                            coverImageAlt={post.data.coverImageAlt}
                        />
                    ))}
                </div>
            )}
        </div>
    </section>
</BaseLayout>